<?xml version="1.0" encoding="iso-8859-1"?>

<!-- 
  Please see the license.html file included with this distribution for 
  attribution and copyright information.
-->

<root>
    <template name="cycler_column">
		<button_stringcycler>
			<anchored>
				<top parent="columnanchor" anchor="bottom" relation="relative" offset="7" />
				<left offset="97" />
			</anchored>
		</button_stringcycler>
	</template>
	<template name="cycler_columnh">
		<cycler_column>
			<script file="common/scripts/column_cycler.lua" />
		</cycler_column>
	</template>

	<template name="number_unitstat">
		<basicnumber>
			<default>0</default>
			<script file="common/scripts/number_unitstat.lua" />
		</basicnumber>
	</template>
	<template name="number_domainskill">
		<basicnumber>
			<script>
				function action(draginfo)
					rAction = {};
					rAction.skill = target[1];
					rAction.modifier = getValue();
					ActionDomainSkill.performRoll(draginfo, nil, rAction);
					return true;
				end
				
				function onDragStart(button, x, y, draginfo)
					return action(draginfo);
				end
					
				function onDoubleClick(x,y)
					return action();
				end
			</script>
			<anchored to="skillstitle" width="40" height="22">
				<top anchor="bottom" relation="relative" offset="6" />
				<left anchor="left" offset="2" />
			</anchored>
			<default>0</default>
			<rollable />
		</basicnumber>
	</template>
	<template name="label_domainskill">
		<label>
			<anchored height="22">
				<top anchor="top" />
				<left anchor="right" offset="10"/>
				<right parent="skillstitle" anchor="right" offset="-2" />
			</anchored>
		</label>
	</template>
	<template name="number_domaindefense">
		<basicnumber>
			<anchored to="defensestitle" width="40" height="22">
				<top anchor="bottom" relation="relative" offset="6" />
				<right anchor="right" offset="-42" />
			</anchored>
			<default>10</default>
		</basicnumber>
	</template>
	<template name="number_domaindefenselevel">
		<basicnumber>
			<anchored position="right" width="40" offset="10" />
			<default>0</default>
			<min>-3</min>
			<max>3</max>
		</basicnumber>
	</template>
	<template name="label_domaindefense">
		<label>
			<anchored height="22">
				<top anchor="top" />
				<right anchor="left" offset="-10"/>
			</anchored>
		</label>
	</template>
	<template name="cycler_powerdie">
        <cycler_column>
            <parameters>
				<defaultlabelres mergerule="replace">d4</defaultlabelres>
				<labelsres>d6|d8|d10|d12</labelsres>
				<values>d6|d8|d10|d12</values>
			</parameters>
        </cycler_column>
    </template>


	<!-- LIST BUTTONS -->
	<template name="button_unit_letter">
		<button_text_sm>
			<anchored to="buttonanchor" width="80">
				<top />
				<left anchor="right" relation="relative" offset="5" />
			</anchored>
			<state textres="unit_button_letter" />
			<script>
				function onButtonPress()
					local w = Interface.findWindow("reference_groupedlist", "reference.unitdatabyletter");
					if w then
						Interface.toggleWindow("reference_groupedlist", "reference.unitdatabyletter");
					else
						w = Interface.openWindow("reference_groupedlist", "reference.unitdatabyletter");
						w.init({ sRecordType = "unit", sListView = "byletter" });
					end
				end
			</script>
		</button_text_sm>
	</template>
	<template name="button_unit_tier">
		<button_text_sm>
			<anchored to="buttonanchor" width="80">
				<top />
				<left anchor="right" relation="relative" offset="5" />
			</anchored>
			<state textres="unit_button_tier" />
			<script>
				function onButtonPress()
					local w = Interface.findWindow("reference_groupedlist", "reference.unitdatabytier");
					if w then
						Interface.toggleWindow("reference_groupedlist", "reference.unitdatabytier");
					else
						w = Interface.openWindow("reference_groupedlist", "reference.unitdatabytier");
						w.init({ sRecordType = "unit", sListView = "bytier" });
					end
				end
			</script>
		</button_text_sm>
	</template>
	<template name="button_unit_type">
		<button_text_sm>
			<anchored to="buttonanchor" width="80">
				<top />
				<left anchor="right" relation="relative" offset="5" />
			</anchored>
			<state textres="unit_button_type" />
			<script>
				function onButtonPress()
					local w = Interface.findWindow("reference_groupedlist", "reference.unitdatabytype");
					if w then
						Interface.toggleWindow("reference_groupedlist", "reference.unitdatabytype");
					else
						w = Interface.openWindow("reference_groupedlist", "reference.unitdatabytype");
						w.init({ sRecordType = "unit", sListView = "bytype" });
					end
				end
			</script>
		</button_text_sm>
	</template>
	<template name="button_unit_ancestry">
		<button_text_sm>
			<anchored to="buttonanchor" width="80">
				<top />
				<left anchor="right" relation="relative" offset="5" />
			</anchored>
			<state textres="unit_button_ancestry" />
			<script>
				function onButtonPress()
					local w = Interface.findWindow("reference_groupedlist", "reference.unitdatabyancestry");
					if w then
						Interface.toggleWindow("reference_groupedlist", "reference.unitdatabyancestry");
					else
						w = Interface.openWindow("reference_groupedlist", "reference.unitdatabyancestry");
						w.init({ sRecordType = "unit", sListView = "byancestry" });
					end
				end
			</script>
		</button_text_sm>
	</template>
</root>