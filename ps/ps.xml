<?xml version="1.0" encoding="iso-8859-1"?>

<!-- 
    Please see the license.html file included with this distribution for 
    attribution and copyright information.
-->

<root>
    <windowclass name="partysheet_host" merge="join">
        <sheetdata>
            <sub_ps name="domain" insertbefore="tabs">
                <class>ps_domain</class>
            </sub_ps>
            <sub_ps name="powerpool" insertbefore="tabs">
                <class>ps_powerpool</class>
            </sub_ps>
            <tabs_partysheet name="tabs" merge="replace">
                <tab>
					<icon>tab_main</icon>
					<subwindow>main</subwindow>
				</tab>
				<tab>
					<icon>tab_inventory</icon>
					<subwindow>inventory</subwindow>
				</tab>
                <tab>
					<icon>tab_domain</icon>
					<subwindow>domain</subwindow>
				</tab>
                <tab>
					<icon>tab_powerpool</icon>
					<subwindow>powerpool</subwindow>
				</tab>
				<tab>
					<icon>tab_order</icon>
					<subwindow>order</subwindow>
				</tab>
				<tab>
					<icon>tab_xp</icon>
					<subwindow>xp</subwindow>
				</tab>
			</tabs_partysheet>
        </sheetdata>
    </windowclass>

    <windowclass name="ps_domain">
        <sheetdata>
            <windowlist name="officers">
                <anchored width="250">
                    <top />
                    <left />
                    <!-- <bottom parent="" offset="-100" /> -->
                </anchored>
                <datasource>.partyinformation</datasource>
                <class>ps_domainofficer</class>
                <sortby><control>name</control></sortby>
                <allowdelete />
                <empty font="list-empty-ps" gmtextres="ps_emptylistother" />
            </windowlist>
            <scrollbar>
				<anchored to="officers" />
				<target>officers</target>
			</scrollbar>

            <frame_char>
                <bounds>250,0,-10,-20</bounds>
            </frame_char>

            <label name="skillstitle">
				<anchored width="210">
                    <top offset="20" />
                    <left offset="270" />
                </anchored>
				<static textres="ps_label_skills" />
				<frame name="headersimple" offset="10,3,10,3" />
			</label>
            <ps_number_domainskill name="diplomacy">
                <target>diplomacy</target>
            </ps_number_domainskill>
            <ps_label_domainskill name="label_diplomacy">
                <anchored to="diplomacy" />
                <static textres="domain_label_diplomacy" />
            </ps_label_domainskill>
            <ps_number_domainskill name="espionage">
                <target>espionage</target>
            </ps_number_domainskill>
            <ps_label_domainskill name="label_espionage">
                <anchored to="espionage" />
                <static textres="domain_label_espionage" />
            </ps_label_domainskill>
            <ps_number_domainskill name="lore">
                <target>lore</target>
            </ps_number_domainskill>
            <ps_label_domainskill name="label_lore">
                <anchored to="lore" />
                <static textres="domain_label_lore" />
            </ps_label_domainskill>
            <ps_number_domainskill name="operations">
                <target>operations</target>
            </ps_number_domainskill>
            <ps_label_domainskill name="label_operations">
                <anchored to="operations" />
                <static textres="domain_label_operations" />
            </ps_label_domainskill>

            <label name="defensestitle">
				<anchored width="210">
                    <top offset="20" />
                    <left offset="510" />
                </anchored>
				<static textres="ps_label_defenses" />
                <frame name="headersimple" offset="10,3,10,3" />
			</label>
            <label name="label_defense_scores">
                <anchored to="defensestitle" position="insidetopleft" offset="122,0" />
                <static textres="ps_label_defensescore" />
            </label>
            <label name="label_defense_scores">
                <anchored to="defensestitle" position="insidetopleft" offset="172,0" />
                <static textres="ps_label_defenselevel" />
            </label>
            <ps_number_domaindefnese name="communications">
            </ps_number_domaindefnese>
            <ps_number_domaindefneselevel name="communications_level">
                <anchored to="communications" />
                <tooltip textres="domain_tooltip_communications_level" />
            </ps_number_domaindefneselevel>
            <ps_label_domaindefense name="label_communications">
                <anchored to="communications" />
                <static textres="domain_label_communications" />
            </ps_label_domaindefense>
            <ps_number_domaindefnese name="resolve">
            </ps_number_domaindefnese>
            <ps_number_domaindefneselevel name="resolve_level">
                <anchored to="resolve" />
                <tooltip textres="domain_tooltip_resolve_level" />
            </ps_number_domaindefneselevel>
            <ps_label_domaindefense name="label_resolve">
                <anchored to="resolve" />
                <static textres="domain_label_resolve" />
            </ps_label_domaindefense>
            <ps_number_domaindefnese name="resources">
            </ps_number_domaindefnese>
            <ps_number_domaindefneselevel name="resources_level">
                <anchored to="resources" />
                <tooltip textres="domain_tooltip_resources_level" />
            </ps_number_domaindefneselevel>
            <ps_label_domaindefense name="label_resources">
                <anchored to="resources" />
                <static textres="domain_label_resources" />
            </ps_label_domaindefense>

            <!-- Development Tracks -->
            <label name="header_skilltrack">
				<anchored>
                    <top offset="180" />
                    <left offset="270" />
                    <right offset="-40" />
                </anchored>
				<static textres="ps_label_skills" />
                <frame name="headersimple" offset="10,3,10,3" />
			</label>
            <label name="skilltrack_-1">
                <anchored to="header_skilltrack" position="insidetopleft" offset="111" height="20" width="20" />
                <static>-1</static>
            </label>
            <label name="skilltrack_0">
                <anchored to="header_skilltrack" position="insidetopleft" offset="131" height="20" width="20" />
                <static>+0</static>
            </label>
            <label name="skilltrack_1">
                <anchored to="header_skilltrack" position="insidetopleft" offset="151" height="20" width="20" />
                <static>+1</static>
            </label>
            <label name="skilltrack_2">
                <anchored to="header_skilltrack" position="insidetopleft" offset="171" height="20" width="20" />
                <static>+2</static>
            </label>
            <label name="skilltrack_3">
                <anchored to="header_skilltrack" position="insidetopleft" offset="211" height="20" width="20" />
                <static>+3</static>
            </label>
            <label name="skilltrack_4">
                <anchored to="header_skilltrack" position="insidetopleft" offset="271" height="20" width="20" />
                <static>+4</static>
            </label>
            <label name="label_track_diplomacy">
                <anchored to="header_skilltrack" width="110" height="22">
                    <top anchor="bottom" relation="relative" offset="2" />
				    <left anchor="left" offset="-2" />
                </anchored>
                <static textres="domain_label_diplomacy" />
            </label>
            <ps_buttongroup_domainskill name="diplomacytrack">
                <anchored to="label_track_diplomacy" />
                <sourcefields>
					<current>domain.development.diplomacy</current>
				</sourcefields>
            </ps_buttongroup_domainskill>
            <label name="label_track_espionage">
                <anchored to="header_skilltrack" width="110" height="22">
                    <top anchor="bottom" relation="relative" offset="2" />
				    <left anchor="left" offset="-2" />
                </anchored>
                <static textres="domain_label_espionage" />
            </label>
            <ps_buttongroup_domainskill name="espionagetrack">
                <anchored to="label_track_espionage" />
                <sourcefields>
					<current>domain.development.espionage</current>
				</sourcefields>
            </ps_buttongroup_domainskill>
            <label name="label_track_lore">
                <anchored to="header_skilltrack" width="110" height="22">
                    <top anchor="bottom" relation="relative" offset="2" />
				    <left anchor="left" offset="-2" />
                </anchored>
                <static textres="domain_label_lore" />
            </label>
            <ps_buttongroup_domainskill name="loretrack">
                <anchored to="label_track_lore" />
                <sourcefields>
					<current>domain.development.lore</current>
				</sourcefields>
            </ps_buttongroup_domainskill>
            <label name="label_track_operations">
                <anchored to="header_skilltrack" width="110" height="22">
                    <top anchor="bottom" relation="relative" offset="2" />
				    <left anchor="left" offset="-2" />
                </anchored>
                <static textres="domain_label_operations" />
            </label>
            <ps_buttongroup_domainskill name="operationstrack">
                <anchored to="label_track_operations" />
                <sourcefields>
					<current>domain.development.operations</current>
				</sourcefields>
            </ps_buttongroup_domainskill>

            <label name="header_defensestrack">
				<anchored>
                    <top offset="305" />
                    <left offset="270" />
                    <right offset="-40" />
                </anchored>
				<static textres="ps_label_defenses" />
                <frame name="headersimple" offset="10,3,10,3" />
			</label>
            <label name="defensestrack_10">
                <anchored to="header_defensestrack" position="insidetopleft" offset="111" height="20" width="20" />
                <static>10</static>
            </label>
            <label name="defensestrack_11">
                <anchored to="header_defensestrack" position="insidetopleft" offset="131" height="20" width="20" />
                <static>11</static>
            </label>
            <label name="defensestrack_12">
                <anchored to="header_defensestrack" position="insidetopleft" offset="151" height="20" width="20" />
                <static>12</static>
            </label>
            <label name="defensestrack_13">
                <anchored to="header_defensestrack" position="insidetopleft" offset="171" height="20" width="20" />
                <static>13</static>
            </label>
            <label name="defensestrack_14">
                <anchored to="header_defensestrack" position="insidetopleft" offset="191" height="20" width="20" />
                <static>14</static>
            </label>
            <label name="defensestrack_15">
                <anchored to="header_defensestrack" position="insidetopleft" offset="231" height="20" width="20" />
                <static>15</static>
            </label>
            <label name="defensestrack_16">
                <anchored to="header_defensestrack" position="insidetopleft" offset="271" height="20" width="20" />
                <static>16</static>
            </label>
            <label name="defensestrack_17">
                <anchored to="header_defensestrack" position="insidetopleft" offset="311" height="20" width="20" />
                <static>17</static>
            </label>
            <label name="defensestrack_18">
                <anchored to="header_defensestrack" position="insidetopleft" offset="371" height="20" width="20" />
                <static>18</static>
            </label>
            <label name="label_track_communications">
                <anchored to="header_defensestrack" width="110" height="22">
                    <top anchor="bottom" relation="relative" offset="2" />
				    <left anchor="left" offset="-2" />
                </anchored>
                <static textres="domain_label_communications" />
            </label>
            <ps_buttongroup_domaindefense name="communicationstrack">
                <anchored to="label_track_communications" />
                <sourcefields>
					<current>domain.development.communications</current>
				</sourcefields>
            </ps_buttongroup_domaindefense>
            <label name="label_track_resolve">
                <anchored to="header_defensestrack" width="110" height="22">
                    <top anchor="bottom" relation="relative" offset="2" />
				    <left anchor="left" offset="-2" />
                </anchored>
                <static textres="domain_label_resolve" />
            </label>
            <ps_buttongroup_domaindefense name="resolvetrack">
                <anchored to="label_track_resolve" />
                <sourcefields>
					<current>domain.development.resolve</current>
				</sourcefields>
            </ps_buttongroup_domaindefense>
            <label name="label_track_resources">
                <anchored to="header_defensestrack" width="110" height="22">
                    <top anchor="bottom" relation="relative" offset="2" />
				    <left anchor="left" offset="-2" />
                </anchored>
                <static textres="domain_label_resources" />
            </label>
            <ps_buttongroup_domaindefense name="resourcestrack">
                <anchored to="label_track_resources" />
                <sourcefields>
					<current>domain.development.resources</current>
				</sourcefields>
            </ps_buttongroup_domaindefense>
        </sheetdata>
    </windowclass>

    <windowclass name="ps_domainofficer">
        <margins control="0,0,0,10" />
		<frame>partysheetentry</frame>
        <sheetdata>
            <hlink name="link">
				<script>
					function onValueChanged()
						window.portrait.update();
					end
				</script>
			</hlink>

            <portrait_base>
				<bounds>10,10,40,40</bounds>
			</portrait_base>
			<portrait name="portrait">
				<bounds>10,10,40,40</bounds>
			</portrait>
            <string_ps name="name">
				<anchored position="insidetopleft" offset="55,10" width="140" height="20" />
				<empty textres="library_recordtype_empty_charsheet" />
			</string_ps>
            <stringu name="titlename">
                <anchored position="insidetopleft" offset="55,35" width="118" height="20" />
                <empty textres="ps_empty_title" />
            </stringu>
            <linkcontrol name="titlelink">
                <anchored to="titlename" position="right" offset="2" width="20" />
                <class>ref_title</class>
                <readonly />
            </linkcontrol>
            <label name="label_proficiencyused">
                <anchored to="name" position="righthigh" offset="5" width="10" height="20" />
                <static textres="ps_label_prof"/>
            </label>
            <button_checkbox name="proficiencyused">
                <anchored to="label_proficiencyused" position="righthigh" offset="2" width="20" height="20" />
                <tooltip textres="domain_tooltip_usedproficiency" />
            </button_checkbox>
            <label name="label_reactionused">
                <anchored to="titlelink" position="righthigh" offset="5" width="10" height="20" />
                <static textres="ps_label_react"/>
            </label>
            <button_checkbox name="reactionused">
                <anchored to="label_reactionused" position="righthigh" offset="2" width="20" height="20" />
                <tooltip textres="domain_tooltip_usedreaction" />
            </button_checkbox>
        </sheetdata>
    </windowclass>

    <windowclass name="ps_powerpool">
        <sheetdata>
            <windowlist name="powerpool">
                <anchored width="180" height="180">
                    <top offset="100"/>
                    <left anchor="center" offset="-90"/>
                </anchored>
                <script file="ps/scripts/ps_powerpool.lua" />
                <datasource>.powerpool</datasource>
                <class>powerpool_entry</class>
                <allowcreate />
			    <allowdelete />
                <acceptdrop>
                    <type>number</type>
                </acceptdrop>
                <skipempty />
                <columns>
                    <width>35</width>
                    <fillwidth />
                </columns>
                <empty font="list-empty-ps" textres="ps_empty_powerpool" />
                <frame name="groupbox" offset="5,10,15,10" />
            </windowlist>
            <scrollbar_list>
				<anchored to="powerpool" offset="-5" />
				<target>powerpool</target>
			</scrollbar_list>
            <label_ps name="header_powerpool">
				<anchored to="powerpool" position="above" offset="0,5" />
				<static textres="ps_label_powerpool" />
				<center />
			</label_ps>
            <button_iedit name="powerpool_iedit">
				<anchored to="header_powerpool" position="righthigh" offset="-20,-5" />
				<target>powerpool</target>
			</button_iedit>
			<button_iadd name="powerpool_iadd">
				<anchored to="powerpool_iedit" position="lefthigh" offset="5,0" />
				<target>powerpool</target>
			</button_iadd>

            <label_ps name="size_label">
                <anchored to="powerpool" position="above" offset="0,40" />
                <static textres="ps_label_domainsize" />
            </label_ps>
            <basicnumber name="domainsize">
                <anchored to="powerpool" position="righthigh" offset="-30,-60" height="20" width="40" />
                <default>1</default>
                <min>1</min>
                <max>5</max>
            </basicnumber>

            <windowlist name="powers">
                <anchored width="220">
                    <top offset="30" />
                    <left offset="25" />
                    <bottom offset="-25" />
                </anchored>
                <frame name="groupbox" offset="5,10,15,10" />
                <footer>footer_narrow</footer>
                <datasource>.powers</datasource>
                <class>ps_domain_power</class>
                <useallmodules />
                <allowcreate />
                <allowdelete />
                <child></child>
                <empty font="list-empty-ps" textres="ps_empty_powers" />
                <frame name="groupbox" offset="5,10,15,10" />
                <script>
                    function addEntry()
                        local w = createWindow();
                        if bFocus then
                            w[sFocus].setFocus();
                        end
                        return w;
                    end

                    function update()
                        local bEditMode = (window.powers_iedit.getValue() == 1);
                        for _,w in pairs(getWindows()) do
                            w.update(bEditMode);
                        end
                    end
                </script>
            </windowlist>
            <scrollbar>
				<anchored to="powers" />
				<target>powers</target>
			</scrollbar>
            <label_ps name="header_powers">
				<anchored to="powers" position="above" offset="0,5" />
				<static textres="ps_label_powers" />
				<center />
			</label_ps>
            <button_iedit name="powers_iedit">
				<anchored to="header_powers" position="righthigh" offset="-20,-5" />
				<target>powers</target>
			</button_iedit>
			<button_iadd name="powers_iadd">
				<anchored to="powers_iedit" position="lefthigh" offset="5,0" />
				<target>powers</target>
			</button_iadd>

            <windowlist name="features">
                <anchored width="220">
                    <top offset="30" />
                    <right offset="-25" />
                    <bottom offset="-25" />
                </anchored>
                <frame name="groupbox" offset="5,10,15,10" />
                <footer>footer_narrow</footer>
                <datasource>.features</datasource>
                <class>ps_domain_feature</class>
                <useallmodules />
                <allowcreate />
                <allowdelete />
                <child></child>
                <empty font="list-empty-ps" textres="ps_empty_features" />
                <frame name="groupbox" offset="5,10,15,10" />
                <script>
                    function addEntry()
                        local w = createWindow();
                        if bFocus then
                            w[sFocus].setFocus();
                        end
                        return w;
                    end

                    function update()
                        local bEditMode = (window.features_iedit.getValue() == 1);
                        for _,w in pairs(getWindows()) do
                            w.update(bEditMode);
                        end
                    end
                </script>
            </windowlist>
            <scrollbar>
				<anchored to="features" />
				<target>features</target>
			</scrollbar>
            <label_ps name="header_features">
				<anchored to="features" position="above" offset="0,5" />
				<static textres="ps_label_features" />
				<center />
			</label_ps>
            <button_iedit name="features_iedit">
				<anchored to="header_features" position="righthigh" offset="-20,-5" />
				<target>features</target>
			</button_iedit>
			<button_iadd name="features_iadd">
				<anchored to="features_iedit" position="lefthigh" offset="5,0" />
				<target>features</target>
			</button_iadd>
        </sheetdata>
    </windowclass>

    <windowclass name="ps_domain_power">
        <margin>0,0,0,2</margin>
        <script>
            function onInit()
                update(false);
            end
            function update(bEditMode)
                idelete.setVisibility(bEditMode);
                name.setReadOnly(not bEditMode);
                desc.setReadOnly(not bEditMode)
            end
        </script>
        <sheetdata>
            <genericcontrol name="rightanchor">
				<anchored height="0" width="0">
					<top />
					<right />
				</anchored>
			</genericcontrol>
			<button_idelete name="idelete">
				<anchored>
					<top offset="2" />
					<right parent="rightanchor" anchor="left" relation="relative" offset="-5" />
				</anchored>
			</button_idelete>

			<stringfield name="name">
				<anchored position="insidetopleft" offset="5,2">
					<right parent="rightanchor" anchor="left" relation="relative" offset="-5" />
				</anchored>
				<frame name="rowshade" offset="5,2,5,2" />
				<font>sheetlabel</font>
				<multilinespacing>20</multilinespacing>
				<empty textres="ps_empty_featurepower" />
			</stringfield>
			
			<formattedtextfield name="desc">
				<anchored to="name" position="belowleft" offset="0,5">
					<right parent="" offset="-5" />
				</anchored>
				<multilinespacing>20</multilinespacing>
			</formattedtextfield>
        </sheetdata>
    </windowclass>
    <windowclass name="ps_domain_feature">
        <margin>0,0,0,2</margin>
        <script>
            function onInit()
                update(false);
            end
            function update(bEditMode)
                idelete.setVisibility(bEditMode);
                name.setReadOnly(not bEditMode);
                desc.setReadOnly(not bEditMode)
            end
        </script>
        <sheetdata>
             <genericcontrol name="rightanchor">
				<anchored height="0" width="0">
					<top />
					<right />
				</anchored>
			</genericcontrol>
			<button_idelete name="idelete">
				<anchored>
					<top offset="2" />
					<right parent="rightanchor" anchor="left" relation="relative" offset="-5" />
				</anchored>
			</button_idelete>

			<stringfield name="name">
				<anchored position="insidetopleft" offset="5,2">
					<right parent="rightanchor" anchor="left" relation="relative" offset="-5" />
				</anchored>
				<frame name="rowshade" offset="5,2,5,2" />
				<font>sheetlabel</font>
				<multilinespacing>20</multilinespacing>
				<empty textres="ps_empty_featurepower" />
			</stringfield>
			
			<formattedtextfield name="desc">
				<anchored to="name" position="belowleft" offset="0,5">
					<right parent="" offset="-5" />
				</anchored>
				<multilinespacing>20</multilinespacing>
			</formattedtextfield>
        </sheetdata>
    </windowclass>
</root>