<?xml version="1.0" encoding="iso-8859-1"?>

<!-- 
    Please see the license.html file included with this distribution for 
    attribution and copyright information.
-->

<root>
    <windowclass name="imagewindow" version="&gt;=4" merge="join">
        <script>
            function onInit()
                super.onInit();
                registerMenuItem("Warfare Markers", "icon_warfare", 4, 1)

                registerMenuItem("Friend", "icon_warfare", 4, 1, 7)
                registerMenuItem("Vanguard", "icon_warfare", 4, 1, 7, 1)
                registerMenuItem("Reserves", "icon_warfare", 4, 1, 7, 8)
                registerMenuItem("Center", "icon_warfare", 4, 1, 7, 7)
                registerMenuItem("Rear", "icon_warfare", 4, 1, 7, 6)

                registerMenuItem("Foe", "icon_warfare", 4, 1, 3)
                registerMenuItem("Vanguard", "icon_warfare", 4, 1, 3, 1)
                registerMenuItem("Reserves", "icon_warfare", 4, 1, 3, 2)
                registerMenuItem("Center", "icon_warfare", 4, 1, 3, 3)
                registerMenuItem("Rear", "icon_warfare", 4, 1, 3, 4)
            end

            function onMenuSelection(item, sub1, sub2, sub3)
                super.onMenuSelection(item, sub1);
                local x, y = Input.getMousePosition();
                if item == 4 then
                    if sub1 == 1 then
                        if sub2 == 7 then
                            if sub3 == 1 then
                                Debug.chat('friend vanguard')
                                local draginfo = createControl("DDC_dragdata_control", "DDE_dragdata");
                                Debug.chat(draginfo);
                                draginfo.setType("shortcut");
                                draginfo.setShortcutData("story", "")
                                image.onDrop(x, y, draginfo);
                                draginfo.destroy();
                            elseif sub3 == 8 then
                                Debug.chat('friend reserves')
                            elseif sub3 == 7 then
                                Debug.chat('friend center')
                            elseif sub3 == 6 then
                                Debug.chat('friend rear')
                            end
                        elseif sub2 == 3 then
                            if sub3 == 1 then
                                Debug.chat('foe vanguard')
                            elseif sub3 == 2 then
                                Debug.chat('foe reserves')
                            elseif sub3 == 3 then
                                Debug.chat('foe center')
                            elseif sub3 == 4 then
                                Debug.chat('foe rear')
                            end
                        end
                    end
                end
            end
        </script>
    </windowclass>
    <!-- <windowclass name="imagewindow_toolbar" version="&gt;=4" merge="join">
        <sheetdata>
            <image_toolbar_button_toggle name="warfaremarkers">
                <icon>tool_warfare_30</icon>
                <script>
                    function onButtonPress()
                        Debug.chat(getValue() == 1);
                    end
                </script>
            </image_toolbar_button_toggle>

            <subwindow name="vanguard_ally">
                <anchored to="toolbar_anchor" width="34" height="34">
                    <top />
                    <right anchor="left" relation="relative" />
                </anchored>
                <script>
                    function onInit()
                        Debug.chat('subwindow init');
                    end
                </script>
                <class>warfare_rowlink</class>
                <token>tokens/Medium/v.png@Letter Tokens</token>
                <icon>token_vanguard_friend</icon>
                <fastinit />
				<activate />
            </subwindow>
        </sheetdata>
    </windowclass> -->

    <!-- <windowclass name="warfare_rowlink">
        <script file="campaign/scripts/warfare_rowlink.lua" />
        <sheetdata>
            <hn name="imagex" />
			<hn name="imagey" />
            <hnc name="imageid" />
            <hlink name="imageref" />
            <tokenfield name="token">
                <script>
                    function onDragStart(button, x, y, draginfo)
                        Debug.chat(window.parent);

                        draginfo.setType("token");
                        if icon and icon[1] then
                            draginfo.setIcon(icon[1]);
                        end
                        if token and token[1] then
                            draginfo.setTokenData(token[1]);
                        end
					end
					
					function onDragEnd(draginfo)						
						local _,dropref = draginfo.getTokenData();
						window.setLink(dropref);
						return true;
					end
                </script>
                <bounds>0,0,34,34</bounds>
                <empty>token_vanguard_friend</empty>
                <readonly />
                <nodrop />
            </tokenfield>
            <buttoncontrol name="linked">
				<bounds>2,2,24,24</bounds>
				<invisible />
				<icon normal="poll_check" pressed="poll_check" />
				<script>
					function onButtonPress()
						if Session.IsHost then
							window.clearLink();
						end
					end
				</script>
			</buttoncontrol>
        </sheetdata>
    </windowclass> -->
</root>